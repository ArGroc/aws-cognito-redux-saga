!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babel-polyfill"),require("amazon-cognito-identity-js"),require("aws-sdk"),require("redux-saga/effects")):"function"==typeof define&&define.amd?define(["babel-polyfill","amazon-cognito-identity-js","aws-sdk","redux-saga/effects"],t):"object"==typeof exports?exports["aws-cognito-redux-saga"]=t(require("babel-polyfill"),require("amazon-cognito-identity-js"),require("aws-sdk"),require("redux-saga/effects")):e["aws-cognito-redux-saga"]=t(e["babel-polyfill"],e["amazon-cognito-identity-js"],e["aws-sdk"],e["redux-saga/effects"])}("undefined"!=typeof self?self:this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AUTH_INIT="AUTH_INIT",t.AUTH_GET_USER="AUTH_GET_USER",t.AUTH_SET_STATE="AUTH_SET_STATE",t.AUTH_SIGN_UP="AUTH_SIGN_UP",t.AUTH_SIGN_IN="AUTH_SIGN_IN",t.AUTH_SIGN_OUT="AUTH_SIGN_OUT"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AUTH_UNKNOWN="AUTH_UNKNOWN",t.AUTH_SUCCESS="AUTH_SUCCESS",t.AUTH_FAIL="AUTH_FAIL"},function(e,t,n){!function(t,r){e.exports=r(n(7),n(8))}(0,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUser=t.getUserPool=t.get=t.set=void 0;var r=n(5),o=n(1),u=void 0,i=void 0;t.set=function(e){u=e,r.Config.region=u.region,r.Config.credentials=new r.CognitoIdentityCredentials({IdentityPoolId:u.IdentityPoolId}),i=new o.CognitoUserPool({UserPoolId:u.UserPoolId,ClientId:u.ClientId})},t.get=function(){return u},t.getUserPool=function(){return i},t.getUser=function(){return i.getCurrentUser()}},function(t,n){t.exports=e},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.getSession=t.authSignOut=t.getLocalUser=t.authSignIn=t.confirmation=t.authRegister=void 0;var o=n(4),u=r(o),i=n(6),a=r(i),s=n(7),c=r(s),f=n(8),l=r(f),d=n(9),p=r(d),_=n(10),U=r(_),T=n(0),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(T);t.authRegister=u.default,t.confirmation=a.default,t.authSignIn=c.default,t.getLocalUser=l.default,t.authSignOut=p.default,t.getSession=U.default,t.config=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,o.getUserPool)(),u=[new r.CognitoUserAttribute({Name:"email",Value:e})];return new Promise(function(r,o){n.signUp(e,t,u,null,function(e,t){e?o(e):r(t)})})};var r=n(1),o=n(0)},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={Username:e,Pool:(0,o.getUserPool)()},u=new r.CognitoUser(n);return new Promise(function(e,n){u.confirmRegistration(t,!0,function(t,r){t?n(t):e(r)})})};var r=n(1),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={Username:e,Password:t},u=new r.AuthenticationDetails(n),i={Username:e,Pool:(0,o.getUserPool)()},a=new r.CognitoUser(i);return new Promise(function(e,t){a.authenticateUser(u,{onSuccess:function(t){e(t)},onFailure:function(e){t(e)}})})};var r=n(1),o=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.getUser)();if(e)return new Promise(function(t,n){e.getSession(function(r,o){r?n(r):t(e)})});throw new Error("no cognitiveUser value")};var r=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.getUser)();if(!e)throw new Error("no cognitiveUser value");e.signOut(),Promise.resolve()};var r=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.getUser)();if(e)return new Promise(function(t,n){e.getSession(function(e,r){e?n(e):t(r)})});throw new Error("no cognitiveUser value")};var r=n(0)}])})},function(e,t,n){n(4),e.exports=n(5)},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.state=t.action=t.sagas=t.config=void 0;var o=n(6),u=function(e){return e&&e.__esModule?e:{default:e}}(o),i=n(2),a=r(i),s=n(0),c=r(s),f=n(1),l=r(f),d=n(10),p=r(d);t.config=a,t.sagas=u.default,t.action=c,t.state=l,t.reducer=p},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.put)({type:_.AUTH_SET_STATE,payload:f({},m)});case 2:case"end":return e.stop()}},g,this)}function u(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,d.call)(l.getSession);case 3:return e=l.config.getUser(),t.next=6,(0,d.put)({type:_.AUTH_SET_STATE,payload:f({},m,{isSignedIn:T.AUTH_SUCCESS,isConfirmed:T.AUTH_SUCCESS,info:e})});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,(0,d.put)({type:_.AUTH_SET_STATE,payload:f({},m,{isSignedIn:T.AUTH_FAIL,error:t.t0})});case 12:case"end":return t.stop()}},S,this,[[0,8]])}function i(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,d.call)(l.authRegister,e.payload.username,e.payload.password);case 3:return t.next=5,(0,d.put)({type:_.AUTH_SET_STATE,payload:f({},m,{hasSignedUp:T.AUTH_SUCCESS})});case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,(0,d.put)({type:_.AUTH_SET_STATE,payload:f({},m,{error:t.t0})});case 11:case"end":return t.stop()}},v,this,[[0,7]])}function a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.call)(l.authSignOut);case 3:return e.next=5,(0,d.put)({type:_.AUTH_SET_STATE,payload:{isSignedIn:T.AUTH_FAIL}});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,(0,d.put)({type:_.AUTH_SET_STATE,payload:{error:e.t0,isSignedIn:T.AUTH_FAIL}});case 11:case"end":return e.stop()}},y,this,[[0,7]])}function s(e){var t,n,r,o,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,t=e.payload,n=t.username,r=t.password,o=t.code,!o){i.next=5;break}return i.next=5,(0,d.call)(l.confirmation,n,o);case 5:return i.next=7,(0,d.call)(l.authSignIn,n,r);case 7:return u=i.sent,i.next=10,(0,d.call)(l.getLocalUser);case 10:return u=i.sent,i.next=13,(0,d.put)({type:_.AUTH_SET_STATE,payload:{isSignedIn:T.AUTH_SUCCESS,isConfirmed:T.AUTH_SUCCESS,info:u}});case 13:i.next=24;break;case 15:if(i.prev=15,i.t0=i.catch(0),"UserNotConfirmedException"!==i.t0.code){i.next=22;break}return i.next=20,(0,d.put)({type:_.AUTH_SET_STATE,payload:{isConfirmed:T.AUTH_FAIL,error:i.t0}});case 20:i.next=24;break;case 22:return i.next=24,(0,d.put)({type:_.AUTH_SET_STATE,payload:{isConfirmed:T.AUTH_SUCCESS,error:i.t0}});case 24:case"end":return i.stop()}},A,this,[[0,15]])}function c(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.takeLatest)(_.AUTH_INIT,o);case 2:return e.next=4,(0,d.takeLatest)(_.AUTH_GET_USER,u);case 4:return e.next=6,(0,d.takeLatest)(_.AUTH_SIGN_UP,i);case 6:return e.next=8,(0,d.takeLatest)(_.AUTH_SIGN_IN,s);case 8:return e.next=10,(0,d.takeLatest)(_.AUTH_SIGN_OUT,a);case 10:case"end":return e.stop()}},x,this)}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=c;var l=n(2),d=n(9),p=n(0),_=r(p),U=n(1),T=r(U),g=regeneratorRuntime.mark(o),S=regeneratorRuntime.mark(u),v=regeneratorRuntime.mark(i),y=regeneratorRuntime.mark(a),A=regeneratorRuntime.mark(s),x=regeneratorRuntime.mark(c),m={info:{},error:{},isSignedIn:T.AUTH_UNKNOWN,isConfirmed:T.AUTH_UNKNOWN,hasSignedUp:T.AUTH_UNKNOWN}},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.signOut=t.signIn=t.signUp=t.getUser=t.init=void 0;var u,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(0),s=r(a),c=n(1),f=r(c),l=(t.init=function(){return{type:s.AUTH_INIT,payload:{}}},t.getUser=function(){return{type:s.AUTH_GET_USER}},t.signUp=function(e,t){return{type:s.AUTH_SIGN_UP,payload:{username:e,password:t}}},t.signIn=function(e,t,n){return{type:s.AUTH_SIGN_IN,payload:{username:e,password:t,code:n}}},t.signOut=function(){return{type:s.AUTH_SIGN_OUT}},u={},o(u,s.AUTH_SET_STATE,function(e,t){return i({},e,t.payload)}),o(u,s.AUTH_INIT,function(e,t){return i({},e,t.payload)}),u),d={isSignedIn:f.AUTH_UNKNOWN};t.reducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],n=l[t.type];return n?n(e,t):e}}])});
//# sourceMappingURL=index.js.map